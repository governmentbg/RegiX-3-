<?xml version="1.0" encoding="UTF-8"?>
<!--Designed and generated by Altova StyleVision Enterprise Edition 2008 rel. 2 sp1 - see http://www.altova.com/stylevision for more information.-->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:n1="http://egov.bg/RegiX/MTITC/Rts" xmlns:xdt="http://www.w3.org/2005/xpath-datatypes" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:altova="http://www.altova.com">
	<xsl:output version="4.0" method="html" indent="no" encoding="UTF-8" doctype-public="-//W3C//DTD HTML 4.0 Transitional//EN" doctype-system="http://www.w3.org/TR/html4/loose.dtd"/>
	<xsl:param name="SV_OutputFormat" select="'HTML'"/>
	<xsl:variable name="XML" select="/"/>
	<xsl:template match="/">
		<html>
			<head>
				<title/>
			</head>
			<body>
				<xsl:for-each select="$XML">
					<h3 align="center">
						<span>
							<xsl:text>Входни параметри на справка за маршрутни разписания</xsl:text>
						</span>
					</h3>
					<xsl:for-each select="n1:RoutesSearch">
						<table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody>
								<tr>
									<td valign="top" width="286">
										<span style="font-style:italic; ">
											<xsl:text>Община на нач. спирка на курс Отиване:</xsl:text>
										</span>
									</td>
									<td valign="top">
										<xsl:for-each select="n1:ForwardFirstStopMunicipality">
											<span style="font-weight:bold; ">
												<xsl:apply-templates/>
											</span>
										</xsl:for-each>
									</td>
								</tr>
								<tr>
									<td valign="top" width="286">
										<span style="font-style:italic; ">
											<xsl:text>Община на нач. спирка на курс Връщане:</xsl:text>
										</span>
									</td>
									<td valign="top">
										<xsl:for-each select="n1:BackwardFirstStopMunicipality">
											<span style="font-weight:bold; ">
												<xsl:apply-templates/>
											</span>
										</xsl:for-each>
									</td>
								</tr>
								<tr>
									<td valign="top" width="286">
										<span style="font-style:italic; ">
											<xsl:text>Време на тръгване на курс Отиване:</xsl:text>
										</span>
									</td>
									<td valign="top">
										<xsl:for-each select="n1:ForwardTime">
											<span style="font-weight:bold; ">
												<xsl:value-of select="format-number(number(substring(string(string(.)), 1, 2)), '00')"/>
												<xsl:text>:</xsl:text>
												<xsl:value-of select="format-number(number(substring(string(string(.)), 4, 2)), '00')"/>
												<xsl:text>:</xsl:text>
												<xsl:choose>
													<xsl:when test="contains(string(string(.)), 'Z')">
														<xsl:value-of select="format-number(number(substring-after(substring-after(substring-before(string(string(.)), 'Z'), ':'), ':')), '00')"/>
													</xsl:when>
													<xsl:when test="contains(string(string(.)), '+')">
														<xsl:value-of select="format-number(number(substring-after(substring-after(substring-before(string(string(.)), '+'), ':'), ':')), '00')"/>
													</xsl:when>
													<xsl:when test="contains(string(string(.)), '-')">
														<xsl:value-of select="format-number(number(substring-before(substring(string(string(.)), 7), '-')), '00')"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="format-number(number(substring(string(string(.)), 7)), '00')"/>
													</xsl:otherwise>
												</xsl:choose>
											</span>
										</xsl:for-each>
									</td>
								</tr>
								<tr>
									<td valign="top" width="286">
										<span style="font-style:italic; ">
											<xsl:text>Време на тръгване на курс Връщане:</xsl:text>
										</span>
									</td>
									<td valign="top">
										<xsl:for-each select="n1:BackwardTime">
											<span style="font-weight:bold; ">
												<xsl:value-of select="format-number(number(substring(string(string(.)), 1, 2)), '00')"/>
												<xsl:text>:</xsl:text>
												<xsl:value-of select="format-number(number(substring(string(string(.)), 4, 2)), '00')"/>
												<xsl:text>:</xsl:text>
												<xsl:choose>
													<xsl:when test="contains(string(string(.)), 'Z')">
														<xsl:value-of select="format-number(number(substring-after(substring-after(substring-before(string(string(.)), 'Z'), ':'), ':')), '00')"/>
													</xsl:when>
													<xsl:when test="contains(string(string(.)), '+')">
														<xsl:value-of select="format-number(number(substring-after(substring-after(substring-before(string(string(.)), '+'), ':'), ':')), '00')"/>
													</xsl:when>
													<xsl:when test="contains(string(string(.)), '-')">
														<xsl:value-of select="format-number(number(substring-before(substring(string(string(.)), 7), '-')), '00')"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="format-number(number(substring(string(string(.)), 7)), '00')"/>
													</xsl:otherwise>
												</xsl:choose>
											</span>
										</xsl:for-each>
									</td>
								</tr>
								<tr>
									<td valign="top" width="286">
										<span style="font-style:italic; ">
											<xsl:text>Сезонност:</xsl:text>
										</span>
									</td>
									<td valign="top">
										<xsl:for-each select="n1:Seasonal">
											<xsl:choose>
												<xsl:when test="n1:IsSeasonal =&apos;false&apos;">
													<span style="font-weight:bold; ">
														<xsl:text>Целогодишно</xsl:text>
													</span>
												</xsl:when>
												<xsl:when test="n1:IsSeasonal =&apos;true&apos;">
													<span style="font-style:italic; ">
														<xsl:text>От: </xsl:text>
													</span>
													<xsl:for-each select="n1:SeasonStartDay">
														<span style="font-weight:bold; ">
															<xsl:value-of select="format-number(number(substring(string(string(.)), 4, 2)), '00')"/>
														</span>
													</xsl:for-each>
													<span>
														<xsl:text>&#160;</xsl:text>
													</span>
													<xsl:for-each select="n1:SeasonStartMonth">
														<span style="font-weight:bold; ">
															<xsl:call-template name="DateToMonthName">
																<xsl:with-param name="sDate" select="string(string(.))"/>
																<xsl:with-param name="sFormat" select="'long'"/>
															</xsl:call-template>
														</span>
													</xsl:for-each>
													<span style="font-style:italic; ">
														<xsl:text> - до: </xsl:text>
													</span>
													<xsl:for-each select="n1:SeasonEndDay">
														<span style="font-weight:bold; ">
															<xsl:value-of select="format-number(number(substring(string(string(.)), 4, 2)), '00')"/>
														</span>
													</xsl:for-each>
													<span style="font-weight:bold; ">
														<xsl:text>&#160;</xsl:text>
													</span>
													<xsl:for-each select="n1:SeasonEndMonth">
														<span style="font-weight:bold; ">
															<xsl:call-template name="DateToMonthName">
																<xsl:with-param name="sDate" select="string(string(.))"/>
																<xsl:with-param name="sFormat" select="'long'"/>
															</xsl:call-template>
														</span>
													</xsl:for-each>
												</xsl:when>
											</xsl:choose>
										</xsl:for-each>
									</td>
								</tr>
								<tr>
									<td valign="top" width="286">
										<span style="font-style:italic; ">
											<xsl:text>График:</xsl:text>
										</span>
									</td>
									<td valign="top">
										<xsl:for-each select="n1:Schedule">
											<xsl:choose>
												<xsl:when test="n1:IsDaily=&apos;true&apos;">
													<span style="font-weight:bold; ">
														<xsl:text>Ежедневно</xsl:text>
													</span>
												</xsl:when>
												<xsl:when test="n1:IsDaily =&apos;false&apos;">
													<xsl:for-each select="n1:Monday">
														<xsl:choose>
															<xsl:when test=". =&apos;true&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☑</xsl:text>
																</span>
															</xsl:when>
															<xsl:when test=". =&apos;false&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☒</xsl:text>
																</span>
															</xsl:when>
															<xsl:otherwise>
																<span style="font-weight:bold; ">
																	<xsl:text>☐</xsl:text>
																</span>
															</xsl:otherwise>
														</xsl:choose>
														<span>
															<xsl:text> Понеделник</xsl:text>
														</span>
													</xsl:for-each>
													<xsl:for-each select="n1:Tuesday">
														<span>
															<xsl:text>&#160;</xsl:text>
														</span>
														<xsl:choose>
															<xsl:when test=". =&apos;true&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☑</xsl:text>
																</span>
															</xsl:when>
															<xsl:when test=". =&apos;false&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☒</xsl:text>
																</span>
															</xsl:when>
															<xsl:otherwise>
																<span style="font-weight:bold; ">
																	<xsl:text>☐</xsl:text>
																</span>
															</xsl:otherwise>
														</xsl:choose>
														<span>
															<xsl:text> Вторник</xsl:text>
														</span>
													</xsl:for-each>
													<xsl:for-each select="n1:Wednesday">
														<span>
															<xsl:text>&#160;</xsl:text>
														</span>
														<xsl:choose>
															<xsl:when test=". =&apos;true&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☑</xsl:text>
																</span>
															</xsl:when>
															<xsl:when test=". =&apos;false&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☒</xsl:text>
																</span>
															</xsl:when>
															<xsl:otherwise>
																<span style="font-weight:bold; ">
																	<xsl:text>☐</xsl:text>
																</span>
															</xsl:otherwise>
														</xsl:choose>
														<span>
															<xsl:text> Сряда</xsl:text>
														</span>
													</xsl:for-each>
													<xsl:for-each select="n1:Thursday">
														<span>
															<xsl:text>&#160;</xsl:text>
														</span>
														<xsl:choose>
															<xsl:when test=". =&apos;true&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☑</xsl:text>
																</span>
															</xsl:when>
															<xsl:when test=". =&apos;false&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☒</xsl:text>
																</span>
															</xsl:when>
															<xsl:otherwise>
																<span style="font-weight:bold; ">
																	<xsl:text>☐</xsl:text>
																</span>
															</xsl:otherwise>
														</xsl:choose>
														<span>
															<xsl:text> Четвъртък</xsl:text>
														</span>
													</xsl:for-each>
													<xsl:for-each select="n1:Friday">
														<span>
															<xsl:text>&#160;</xsl:text>
														</span>
														<xsl:choose>
															<xsl:when test=". =&apos;true&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☑</xsl:text>
																</span>
															</xsl:when>
															<xsl:when test=". =&apos;false&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☒</xsl:text>
																</span>
															</xsl:when>
															<xsl:otherwise>
																<span style="font-weight:bold; ">
																	<xsl:text>☐</xsl:text>
																</span>
															</xsl:otherwise>
														</xsl:choose>
														<span>
															<xsl:text> Петък</xsl:text>
														</span>
													</xsl:for-each>
													<xsl:for-each select="n1:Saturday">
														<span>
															<xsl:text>&#160;</xsl:text>
														</span>
														<xsl:choose>
															<xsl:when test=". =&apos;true&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☑</xsl:text>
																</span>
															</xsl:when>
															<xsl:when test=". =&apos;false&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☒</xsl:text>
																</span>
															</xsl:when>
															<xsl:otherwise>
																<span style="font-weight:bold; ">
																	<xsl:text>☐</xsl:text>
																</span>
															</xsl:otherwise>
														</xsl:choose>
														<span>
															<xsl:text> Събота</xsl:text>
														</span>
													</xsl:for-each>
													<xsl:for-each select="n1:Sunday">
														<span>
															<xsl:text>&#160;</xsl:text>
														</span>
														<xsl:choose>
															<xsl:when test=". =&apos;true&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☑</xsl:text>
																</span>
															</xsl:when>
															<xsl:when test=". =&apos;false&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☒</xsl:text>
																</span>
															</xsl:when>
															<xsl:otherwise>
																<span style="font-weight:bold; ">
																	<xsl:text>☐</xsl:text>
																</span>
															</xsl:otherwise>
														</xsl:choose>
														<span>
															<xsl:text> Неделя</xsl:text>
														</span>
													</xsl:for-each>
												</xsl:when>
											</xsl:choose>
											<xsl:if test="string-length(n1:BeforeHoliday )&gt;0 or string-length( n1:Holiday )&gt;0">
												<xsl:for-each select="n1:BeforeHoliday">
													<div>
														<xsl:choose>
															<xsl:when test=". =&apos;true&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☑</xsl:text>
																</span>
															</xsl:when>
															<xsl:when test=". =&apos;false&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☒</xsl:text>
																</span>
															</xsl:when>
															<xsl:otherwise>
																<span style="font-weight:bold; ">
																	<xsl:text>☐</xsl:text>
																</span>
															</xsl:otherwise>
														</xsl:choose>
														<span>
															<xsl:text> Предпразник</xsl:text>
														</span>
													</div>
												</xsl:for-each>
												<xsl:for-each select="n1:Holiday">
													<div>
														<xsl:choose>
															<xsl:when test=". =&apos;true&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☑</xsl:text>
																</span>
															</xsl:when>
															<xsl:when test=". =&apos;false&apos;">
																<span style="font-weight:bold; ">
																	<xsl:text>☒</xsl:text>
																</span>
															</xsl:when>
															<xsl:otherwise>
																<span style="font-weight:bold; ">
																	<xsl:text>☐</xsl:text>
																</span>
															</xsl:otherwise>
														</xsl:choose>
														<span>
															<xsl:text> Празник</xsl:text>
														</span>
													</div>
												</xsl:for-each>
											</xsl:if>
										</xsl:for-each>
									</td>
								</tr>
							</tbody>
						</table>
					</xsl:for-each>
				</xsl:for-each>
			</body>
		</html>
	</xsl:template>
	<xsl:template name="DateToMonthName">
		<xsl:param name="sDate"/>
		<xsl:param name="sFormat"/>
		<xsl:variable name="sMonthLong">
			<xsl:call-template name="DateToMonthNameLong">
				<xsl:with-param name="sDate" select="$sDate"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:choose>
			<xsl:when test="$sFormat = 'long'">
				<xsl:value-of select="$sMonthLong"/>
			</xsl:when>
			<xsl:otherwise>
				<xsl:value-of select="substring($sMonthLong, 1, 3)"/>
			</xsl:otherwise>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="DateToMonthNameLong">
		<xsl:param name="sDate"/>
		<xsl:variable name="nMonth">
			<xsl:call-template name="DateToMonthNum">
				<xsl:with-param name="sDate" select="$sDate"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:choose>
			<xsl:when test="$nMonth = 1">January</xsl:when>
			<xsl:when test="$nMonth = 2">February</xsl:when>
			<xsl:when test="$nMonth = 3">March</xsl:when>
			<xsl:when test="$nMonth = 4">April</xsl:when>
			<xsl:when test="$nMonth = 5">May</xsl:when>
			<xsl:when test="$nMonth = 6">June</xsl:when>
			<xsl:when test="$nMonth = 7">July</xsl:when>
			<xsl:when test="$nMonth = 8">August</xsl:when>
			<xsl:when test="$nMonth = 9">September</xsl:when>
			<xsl:when test="$nMonth = 10">October</xsl:when>
			<xsl:when test="$nMonth = 11">November</xsl:when>
			<xsl:otherwise>December</xsl:otherwise>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="DateToMonthNum">
		<xsl:param name="sDate"/>
		<xsl:value-of select="number(substring($sDate, 6, 2))"/>
	</xsl:template>
</xsl:stylesheet>
