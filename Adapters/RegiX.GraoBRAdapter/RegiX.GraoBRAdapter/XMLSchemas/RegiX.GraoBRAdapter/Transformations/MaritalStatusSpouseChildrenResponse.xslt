<?xml version="1.0" encoding="UTF-8"?>
<!--Designed and generated by Altova StyleVision Enterprise Edition 2008 rel. 2 sp1 - see http://www.altova.com/stylevision for more information.-->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:common="http://egov.bg/RegiX/GRAO/BR" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:n1="http://egov.bg/RegiX/GRAO/BR/MaritalStatusSpouseChildrenResponse" xmlns:xdt="http://www.w3.org/2005/xpath-datatypes" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:altova="http://www.altova.com">
	<xsl:output version="4.0" method="html" indent="no" encoding="UTF-8" doctype-public="-//W3C//DTD HTML 4.0 Transitional//EN" doctype-system="http://www.w3.org/TR/html4/loose.dtd"/>
	<xsl:param name="SV_OutputFormat" select="'HTML'"/>
	<xsl:variable name="XML" select="/"/>
	<xsl:decimal-format name="format1" grouping-separator=" " decimal-separator=","/>
	<xsl:template match="/">
		<html>
			<head>
				<title/>
			</head>
			<body>
				<xsl:for-each select="$XML">
					<xsl:for-each select="n1:MaritalStatusSpouseChildrenResponse">
						<h3 align="center">
							<span>
								<xsl:text>Национална база данни &quot;Население&quot;</xsl:text>
							</span>
						</h3>
						<h2 align="center">
							<span>
								<xsl:text>Справка за семейно положение, съпруг/а и деца</xsl:text>
							</span>
						</h2>
						<xsl:choose>
							<xsl:when test="string-length(  n1:MaritalStatusCode ) = 0 and  string-length(  n1:MaritalStatusName  ) = 0 and  string-length(  n1:FirstName  )  = 0
and  string-length(  n1:MiddleName  )  = 0 and  string-length(  n1:LastName  )  = 0 and  string-length(  n1:EGN  )  = 0 and  string-length(  n1:Gender  ) =0 
and  string-length(  n1:Relatives  )  = 0">
								<span>
									<xsl:text>В регистъра не са намерени данни за семейно положение, съпруг/а и деца на лице по подаденото ЕГН.</xsl:text>
								</span>
							</xsl:when>
							<xsl:otherwise>
								<table border="0" width="100%">
									<tbody>
										<tr valign="top">
											<th align="left" width="250px">
												<span style="font-style:italic; font-weight:normal; ">
													<xsl:text>Име</xsl:text>
												</span>
											</th>
											<td>
												<xsl:for-each select="n1:FirstName">
													<xsl:apply-templates/>
												</xsl:for-each>
												<xsl:for-each select="n1:MiddleName">
													<span>
														<xsl:text>&#160;</xsl:text>
													</span>
													<xsl:apply-templates/>
												</xsl:for-each>
												<xsl:for-each select="n1:LastName">
													<span>
														<xsl:text>&#160;</xsl:text>
													</span>
													<xsl:apply-templates/>
												</xsl:for-each>
											</td>
										</tr>
									</tbody>
								</table>
								<xsl:for-each select="n1:EGN">
									<table border="0" width="100%">
										<tbody>
											<tr valign="top">
												<th align="left" width="250px">
													<span style="font-style:italic; font-weight:normal; ">
														<xsl:text>ЕГН / Дата на раждане</xsl:text>
													</span>
												</th>
												<td>
													<xsl:apply-templates/>
												</td>
											</tr>
										</tbody>
									</table>
								</xsl:for-each>
								<xsl:for-each select="n1:MaritalStatusName">
									<table border="0" width="100%">
										<tbody>
											<tr valign="top">
												<th align="left" width="250px">
													<span style="font-style:italic; font-weight:normal; ">
														<xsl:text>Семейно положение</xsl:text>
													</span>
												</th>
												<td>
													<xsl:apply-templates/>
												</td>
											</tr>
										</tbody>
									</table>
								</xsl:for-each>
								<xsl:choose>
									<xsl:when test="string-length( n1:Relatives ) &gt; 0">
										<xsl:for-each select="n1:Relatives">
											<h4>
												<span style="font-style:italic; font-weight:normal; ">
													<xsl:text>Данни за съпруг/а и деца</xsl:text>
												</span>
											</h4>
											<table style="border-collapse:collapse; font-weight:normal; " border="1" width="100%">
												<thead>
													<tr>
														<th style="padding:4px; " align="left" width="106">
															<span>
																<xsl:text>№ по ред</xsl:text>
															</span>
														</th>
														<th style="padding:4px; " align="left">
															<span>
																<xsl:text>Име: </xsl:text>
															</span>
															<span style="font-weight:normal; ">
																<xsl:text>собствено, бащино, фамилно</xsl:text>
															</span>
														</th>
														<th style="padding:4px; " align="left">
															<span>
																<xsl:text>ЕГН / Дата на раждане</xsl:text>
															</span>
														</th>
														<th style="padding:4px; " align="left">
															<span>
																<xsl:text>Съпруг/а/Дете</xsl:text>
															</span>
														</th>
														<th style="padding:4px; " align="left">
															<span>
																<xsl:text>Дата на смърт</xsl:text>
															</span>
														</th>
													</tr>
												</thead>
												<tbody>
													<xsl:for-each select="n1:Relative">
														<xsl:sort select="n1:OrderNumber" data-type="number" order="ascending"/>
														<tr>
															<td style="padding:4px; " width="106">
																<xsl:for-each select="n1:OrderNumber">
																	<xsl:apply-templates/>
																	<span>
																		<xsl:text>.</xsl:text>
																	</span>
																</xsl:for-each>
															</td>
															<td style="padding:4px; ">
																<xsl:for-each select="n1:FirstName">
																	<xsl:apply-templates/>
																</xsl:for-each>
																<xsl:for-each select="n1:MiddleName">
																	<span>
																		<xsl:text>&#160;</xsl:text>
																	</span>
																	<xsl:apply-templates/>
																</xsl:for-each>
																<xsl:for-each select="n1:LastName">
																	<span>
																		<xsl:text>&#160;</xsl:text>
																	</span>
																	<xsl:apply-templates/>
																</xsl:for-each>
															</td>
															<td style="padding:4px; ">
																<xsl:for-each select="n1:EGN">
																	<xsl:apply-templates/>
																</xsl:for-each>
															</td>
															<td style="padding:4px; ">
																<xsl:for-each select="n1:RelativeType">
																	<xsl:apply-templates/>
																</xsl:for-each>
															</td>
															<td style="padding:4px; ">
																<xsl:for-each select="n1:DateOfDeath">
																	<span>
																		<xsl:value-of select="format-number(number(substring(string(string(.)), 9, 2)), '00', 'format1')"/>
																		<xsl:text>.</xsl:text>
																		<xsl:value-of select="format-number(number(substring(string(string(.)), 6, 2)), '00', 'format1')"/>
																		<xsl:text>.</xsl:text>
																		<xsl:value-of select="format-number(number(substring(string(string(string(.))), 1, 4)), '0000', 'format1')"/>
																	</span>
																	<span>
																		<xsl:text> г.</xsl:text>
																	</span>
																</xsl:for-each>
															</td>
														</tr>
													</xsl:for-each>
												</tbody>
											</table>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<h4>
											<span style="font-style:italic; font-weight:normal; ">
												<xsl:text>Данни за съпруг/а и деца</xsl:text>
											</span>
										</h4>
										<span>
											<xsl:text>Не са намерени данни за </xsl:text>
										</span>
										<span style="font-weight:normal; ">
											<xsl:text>съпруг/а и деца на лицето.</xsl:text>
										</span>
										<br/>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:otherwise>
						</xsl:choose>
						<xsl:for-each select="n1:ReportDate">
							<h4>
								<span style="font-style:italic; font-weight:normal; ">
									<xsl:text>Дата на изготвяне на справката</xsl:text>
								</span>
								<span>
									<xsl:text>: </xsl:text>
								</span>
								<span style="font-weight:normal; ">
									<xsl:value-of select="format-number(number(substring(string(string(.)), 9, 2)), '00', 'format1')"/>
									<xsl:text>.</xsl:text>
									<xsl:value-of select="format-number(number(substring(string(string(.)), 6, 2)), '00', 'format1')"/>
									<xsl:text>.</xsl:text>
									<xsl:value-of select="format-number(number(substring(string(string(string(.))), 1, 4)), '0000', 'format1')"/>
									<xsl:text> г. </xsl:text>
									<xsl:value-of select="format-number(number(substring(string(string(.)), 12, 2)), '00', 'format1')"/>
									<xsl:text>:</xsl:text>
									<xsl:value-of select="format-number(number(substring(string(string(.)), 15, 2)), '00', 'format1')"/>
									<xsl:text> ч.</xsl:text>
								</span>
							</h4>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</body>
		</html>
	</xsl:template>
</xsl:stylesheet>
